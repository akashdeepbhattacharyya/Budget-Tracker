import{d as m,e as I,h as k,i as _,j as $}from"./chunk-2SLIITVG.js";import{$b as n,Cb as g,Gb as l,Hb as t,Ib as u,Jc as S,Kc as E,Nc as B,Oc as C,Z as x,Za as s,bc as d,ca as y,cb as h,jb as D,pb as w}from"./chunk-BFLZSBBN.js";var c=class r{constructor(e){this.http=e}apiUrl=B.apiUrl+"dashboard";getToken(){return localStorage.getItem("access_token")}getData(){let e=this.getToken(),a=new S().set("Content-Type","application/json");return e&&(a=a.set("Authorization",`Bearer ${e}`)),this.http.get(`${this.apiUrl}`,{headers:a})}static \u0275fac=function(a){return new(a||r)(y(E))};static \u0275prov=x({token:r,factory:r.\u0275fac,providedIn:"root"})};function H(r,e){r&1&&u(0,"div",9)}function M(r,e){r&1&&u(0,"div",10)}var p=class r{constructor(e,a){this.dashboardService=e;this.loaderService=a}totalIncome=0;totalExpenses=0;balance=0;monthlyBudget=0;remainingBudget=0;ngOnInit(){this.getDashboardData()}getDashboardData(){this.loaderService.show(),this.dashboardService.getData().subscribe(e=>{this.totalIncome=e.total_income,this.totalExpenses=e.total_expenses,this.balance=e.balance,this.monthlyBudget=e.monthly_budget,this.remainingBudget=e.budget_remaining,setTimeout(()=>{this.drawDonutChart("income-expense-chart",[{label:"Income",value:e.total_income},{label:"Expenses",value:e.total_expenses}],"Income vs Expenses"),this.drawDonutChart("budget-chart",[{label:"Used",value:e.total_expenses},{label:"Remaining",value:Math.max(e.budget_remaining,0)}],"Budget Usage"),this.loaderService.hide()},1e3)})}drawDonutChart(e,a,o){let j=Math.min(350,350)/2-30;m(`#${e}`).selectAll("*").remove();let b=m(`#${e}`).append("svg").attr("width",350).attr("height",350).append("g").attr("transform",`translate(${350/2},${350/2})`),T=I().domain(a.map(i=>i.label)).range(k),f=$().value(i=>i.value)(a),v=_().innerRadius(70).outerRadius(j);b.selectAll("path").data(f).enter().append("path").attr("d",i=>v(i)).attr("fill",i=>T(i.data.label)).attr("stroke","white").style("stroke-width","2px"),b.selectAll("text").data(f).enter().append("text").text(i=>`${i.data.label}: ${i.data.value}`).attr("transform",i=>`translate(${v.centroid(i)})`).style("text-anchor","middle").style("font-size","12px").style("fill","white"),m(`#${e}`).append("div").style("text-align","center").style("margin-top","10px").style("font-size","16px").style("font-weight","bold").style("color","rgb(108 159 206)").text(o)}static \u0275fac=function(a){return new(a||r)(h(c),h(C))};static \u0275cmp=D({type:r,selectors:[["app-dashboard"]],decls:33,vars:7,consts:[[1,"flex","items-center","justify-center","mt-10","bg-gray-100","dark:bg-gray-900"],[1,"w-full","max-w-7xl","p-6","bg-white","dark:bg-gray-800","shadow-md","rounded-lg"],[1,"flex","items-center","justify-between","mb-10"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200"],[1,"dashboard","flex","justify-between"],[1,"dark:text-gray-300","mb-3","font-semibold"],[1,"dark:text-gray-300"],[1,"font-medium"],[1,"dark:text-gray-300","mb-3","mt-4","font-semibold"],["id","income-chart",2,"display","inline-block","margin-left","50px"],["id","budget-chart",2,"display","inline-block","margin-left","50px"]],template:function(a,o){a&1&&(l(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),n(4," Dashboard "),t()(),l(5,"div",4)(6,"div")(7,"h2",5),n(8,"Financial Summary"),t(),l(9,"p",6)(10,"b",7),n(11,"Total Income :"),t(),n(12),t(),l(13,"p",6)(14,"b",7),n(15,"Total Expenses :"),t(),n(16),t(),l(17,"p",6)(18,"b",7),n(19,"Balance :"),t(),n(20),t(),l(21,"h2",8),n(22,"Budget Overview"),t(),l(23,"p",6)(24,"b",7),n(25,"Monthly Budget :"),t(),n(26),t(),l(27,"p",6)(28,"b",7),n(29,"Remaining Budget :"),t(),n(30),t()(),w(31,H,1,0,"div",9)(32,M,1,0,"div",10),t()()()),a&2&&(s(12),d(" \u20B9",o.totalIncome,""),s(4),d(" \u20B9",o.totalExpenses,""),s(4),d(" \u20B9",o.balance,""),s(6),d(" \u20B9",o.monthlyBudget,""),s(4),d(" \u20B9",o.remainingBudget,""),s(),g(o.totalIncome!==void 0&&o.totalIncome>0?31:-1),s(),g(o.monthlyBudget!==void 0&&o.monthlyBudget>0?32:-1))},encapsulation:2})};var W=[{path:"",component:p}];export{W as routes};

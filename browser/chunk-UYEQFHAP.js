import{d as m,e as B,h as I,i as k,j as C}from"./chunk-2SLIITVG.js";import{$b as i,Gb as r,Hb as t,Ib as y,Jc as w,Kc as S,Nc as D,Oc as E,Z as x,Za as l,bc as d,ca as v,cb as h,jb as f}from"./chunk-BFLZSBBN.js";var c=class s{constructor(e){this.http=e}apiUrl=D.apiUrl+"dashboard";getToken(){return localStorage.getItem("access_token")}getData(){let e=this.getToken(),a=new w().set("Content-Type","application/json");return e&&(a=a.set("Authorization",`Bearer ${e}`)),this.http.get(`${this.apiUrl}`,{headers:a})}static \u0275fac=function(a){return new(a||s)(v(S))};static \u0275prov=x({token:s,factory:s.\u0275fac,providedIn:"root"})};var p=class s{constructor(e,a){this.dashboardService=e;this.loaderService=a}totalIncome=0;totalExpenses=0;balance=0;monthlyBudget=0;remainingBudget=0;ngOnInit(){this.getDashboardData()}getDashboardData(){this.loaderService.show(),this.dashboardService.getData().subscribe(e=>{this.totalIncome=e.total_income,this.totalExpenses=e.total_expenses,this.balance=e.balance,this.monthlyBudget=e.monthly_budget,this.remainingBudget=e.budget_remaining,setTimeout(()=>{this.drawDonutChart("income-expense-chart",[{label:"Income",value:e.total_income},{label:"Expenses",value:e.total_expenses}],"Income vs Expenses"),this.drawDonutChart("budget-chart",[{label:"Used",value:e.total_expenses},{label:"Remaining",value:Math.max(e.budget_remaining,0)}],"Budget Usage"),this.loaderService.hide()},1e3)})}drawDonutChart(e,a,o){let $=Math.min(350,350)/2-30;m(`#${e}`).selectAll("*").remove();let g=m(`#${e}`).append("svg").attr("width",350).attr("height",350).append("g").attr("transform",`translate(${350/2},${350/2})`),j=B().domain(a.map(n=>n.label)).range(I),u=C().value(n=>n.value)(a),b=k().innerRadius(70).outerRadius($);g.selectAll("path").data(u).enter().append("path").attr("d",n=>b(n)).attr("fill",n=>j(n.data.label)).attr("stroke","white").style("stroke-width","2px"),g.selectAll("text").data(u).enter().append("text").text(n=>`${n.data.label}: ${n.data.value}`).attr("transform",n=>`translate(${b.centroid(n)})`).style("text-anchor","middle").style("font-size","12px").style("fill","white"),m(`#${e}`).append("div").style("text-align","center").style("margin-top","10px").style("font-size","16px").style("font-weight","bold").style("color","rgb(108 159 206)").text(o)}static \u0275fac=function(a){return new(a||s)(h(c),h(E))};static \u0275cmp=f({type:s,selectors:[["app-dashboard"]],decls:33,vars:5,consts:[[1,"flex","items-center","justify-center","mt-10","bg-gray-100","dark:bg-gray-900"],[1,"w-full","max-w-7xl","p-6","bg-white","dark:bg-gray-800","shadow-md","rounded-lg"],[1,"flex","items-center","justify-between","mb-10"],[1,"text-2xl","font-bold","text-gray-800","dark:text-gray-200"],[1,"dashboard","flex","justify-between"],[1,"dark:text-gray-300","mb-3","font-semibold"],[1,"dark:text-gray-300"],[1,"font-medium"],[1,"dark:text-gray-300","mb-3","mt-4","font-semibold"],["id","income-expense-chart",2,"display","inline-block"],["id","budget-chart",2,"display","inline-block","margin-left","50px"]],template:function(a,o){a&1&&(r(0,"div",0)(1,"div",1)(2,"div",2)(3,"h1",3),i(4," Dashboard "),t()(),r(5,"div",4)(6,"div")(7,"h2",5),i(8,"Financial Summary"),t(),r(9,"p",6)(10,"b",7),i(11,"Total Income :"),t(),i(12),t(),r(13,"p",6)(14,"b",7),i(15,"Total Expenses :"),t(),i(16),t(),r(17,"p",6)(18,"b",7),i(19,"Balance :"),t(),i(20),t(),r(21,"h2",8),i(22,"Budget Overview"),t(),r(23,"p",6)(24,"b",7),i(25,"Monthly Budget :"),t(),i(26),t(),r(27,"p",6)(28,"b",7),i(29,"Remaining Budget :"),t(),i(30),t()(),y(31,"div",9)(32,"div",10),t()()()),a&2&&(l(12),d(" \u20B9",o.totalIncome,""),l(4),d(" \u20B9",o.totalExpenses,""),l(4),d(" \u20B9",o.balance,""),l(6),d(" \u20B9",o.monthlyBudget,""),l(4),d(" \u20B9",o.remainingBudget,""))},encapsulation:2})};var J=[{path:"",component:p}];export{J as routes};
